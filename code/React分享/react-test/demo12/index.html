<!DOCTYPE html>
<html>
<head>
    <script src="https://a.alipayobjects.com/??es5-shim/4.1.10/es5-shim.min.js,es5-shim/4.1.10/es5-sham.min.js,html5shiv/3.7.2/src/html5shiv.js"></script>
    <script src="../build/react.js"></script>
    <script src="../build/JSXTransformer.js"></script>

    <script src="../build/jquery-1.7.1.min.js"></script>
    <script src="../build/jquery.rotate.min.js"></script>
    <style>
        .example {
            background: url(img/g.png) no-repeat;
            width: 504px;
            height: 504px;
            position: relative;
        }

        .example img {
            position: absolute;
            left: 152px;
            top: 152px;
        }
    </style>
</head>
<body>
<div class="example" id="example"></div>
<script type="text/jsx">
    var LikeButton = React.createClass({
        // 设置初始化状态
        getInitialState: function () {
            var data = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];
            return {data: data};
        },
        // 旋转方法
        rotateFunc: function (elem, awards, angle, text) {
            $(elem).stopRotate();

            // 调用jq转盘插件
            $(elem).rotate({
                "angle": 0,
                "duration": 5000,
                "animateTo": angle + 1440,
                "callback": function () {
                    alert(text);
                }
            });
        },
        // 绑定点击事件
        handleClick: function (event) {
            // 随机结果
            var data = this.state.data[Math.floor(Math.random() * (this.state.data.length))];

            switch (data) {
                case 1:
                    this.rotateFunc(event.target, 1, 16, '恭喜你抽中了1个月绿钻');
                    break;
                case 2:
                    this.rotateFunc(event.target, 2, 47, '恭喜你抽中了2个月绿钻');
                    break;
                case 3:
                    this.rotateFunc(event.target, 3, 76, '恭喜你抽中了3个月绿钻');
                    break;
                case 4:
                    this.rotateFunc(event.target, 4, 106, '恭喜你抽中了4个月绿钻');
                    break;
                case 5:
                    this.rotateFunc(event.target, 5, 135, '恭喜你抽中了5个月绿钻');
                    break;
                case 6:
                    this.rotateFunc(event.target, 6, 164, '恭喜你抽中了6个月绿钻');
                    break;
                case 7:
                    this.rotateFunc(event.target, 7, 193, '恭喜你抽中了7个月绿钻');
                    break;
                case 8:
                    this.rotateFunc(event.target, 8, 223, '恭喜你抽中了8个月绿钻');
                    break;
                case 9:
                    this.rotateFunc(event.target, 9, 252, '恭喜你抽中了9个月绿钻');
                    break;
                case 10:
                    this.rotateFunc(event.target, 10, 284, '恭喜你抽中了10个月绿钻');
                    break;
                case 11:
                    this.rotateFunc(event.target, 11, 314, '恭喜你抽中了11个月绿钻');
                    break;
                case 12:
                    this.rotateFunc(event.target, 12, 345, '恭喜你抽中了12个月绿钻');
                    break;
            }
        },
        render: function () {
            return (
                    <img class="hand" src="img/z.png" alt="" onClick={this.handleClick}/>
            )
        }
    });

    React.render(
            <LikeButton />,
            document.getElementById('example')
    );
</script>
</body>
</html>

